@startuml System Architecture
!define RECTANGLE class

skinparam backgroundColor #FEFEFE
skinparam componentStyle rectangle
skinparam defaultFontName Arial
skinparam defaultFontSize 12

' Title
title **Automated Timetable Scheduling and Faculty Workload Optimization System**\n**System Architecture Diagram**

' Frontend Layer
package "**Frontend Layer**" #E3F2FD {
    component "index.html" as frontend #2196F3 {
        [User Interface]
        [Simulation Features]
        [Timetable Display]
        [Data Management]
    }
    
    component "JavaScript" as js #1976D2 {
        [API Integration]
        [DOM Manipulation]
        [Event Handlers]
        [Data Visualization]
    }
}

' Backend Layer
package "**Backend Layer (Node.js + Express)**" #E8F5E9 {
    component "Express Server" as server #4CAF50 {
        [Route Handlers]
        [Middleware]
        [CORS Configuration]
    }
    
    package "**Routes**" #C8E6C9 {
        component "faculty.js" as facultyRoute
        component "course.js" as courseRoute
        component "room.js" as roomRoute
        component "section.js" as sectionRoute
        component "timeslot.js" as timeslotRoute
        component "timetable.js" as timetableRoute
        component "simulation.js" as simulationRoute #FF9800
    }
    
    package "**Services**" #FFF9C4 {
        component "timetableGenerator.js" as generator #FFC107 {
            [Constraint Solver]
            [Conflict Detection]
            [Conflict Resolution]
        }
        
        component "Simulation Engine" as simEngine #FF9800 {
            [Faculty Impact Analysis]
            [Room Shortage Analysis]
            [Scenario Comparison]
            [Bulk Analysis]
        }
    }
    
    package "**Models (Mongoose)**" #FCE4EC {
        component "Faculty" as facultyModel #E91E63
        component "Course" as courseModel #E91E63
        component "Room" as roomModel #E91E63
        component "Section" as sectionModel #E91E63
        component "TimeSlot" as timeslotModel #E91E63
        component "Timetable" as timetableModel #E91E63
        component "FacultyAvailability" as availModel #E91E63
    }
}

' Database Layer
database "**MongoDB**" as mongodb #F3E5F5 {
    storage "timetable_db" as db #9C27B0 {
        folder "Collections" {
            [faculties]
            [courses]
            [rooms]
            [sections]
            [timeslots]
            [timetables]
            [facultyavailabilities]
        }
    }
}

' Data Layer
package "**Data Seeding**" #FFEBEE {
    component "seed.js" as seed #F44336 {
        [21 Faculty Members]
        [Course Data]
        [Room Data]
        [Section Data]
        [Timeslot Data]
    }
}

' Connections - Frontend to Backend
frontend -down-> server : "HTTP/HTTPS\nREST API Calls"
js -down-> server : "Fetch API\nJSON Data"

' Connections - Server to Routes
server -down-> facultyRoute
server -down-> courseRoute
server -down-> roomRoute
server -down-> sectionRoute
server -down-> timeslotRoute
server -down-> timetableRoute
server -down-> simulationRoute

' Connections - Routes to Services
timetableRoute -down-> generator
simulationRoute -down-> simEngine
simulationRoute -down-> generator : "Uses for\nimpact calculation"

' Connections - Services to Models
generator -down-> facultyModel
generator -down-> courseModel
generator -down-> roomModel
generator -down-> sectionModel
generator -down-> timeslotModel
generator -down-> timetableModel
generator -down-> availModel

simEngine -down-> facultyModel
simEngine -down-> courseModel
simEngine -down-> roomModel
simEngine -down-> timetableModel

' Connections - Routes to Models
facultyRoute -down-> facultyModel
courseRoute -down-> courseModel
roomRoute -down-> roomModel
sectionRoute -down-> sectionModel
timeslotRoute -down-> timeslotModel
timetableRoute -down-> timetableModel

' Connections - Models to Database
facultyModel -down-> mongodb
courseModel -down-> mongodb
roomModel -down-> mongodb
sectionModel -down-> mongodb
timeslotModel -down-> mongodb
timetableModel -down-> mongodb
availModel -down-> mongodb

' Connections - Seed to Database
seed -down-> mongodb : "Initial Data\nPopulation"

' Legend
legend right
    |= **Technology Stack** |
    | Frontend | HTML5, CSS3, Vanilla JavaScript |
    | Backend | Node.js, Express.js |
    | Database | MongoDB, Mongoose ODM |
    | API | RESTful API |
    
    |= **Key Features** |
    | Timetable Generation | Constraint-based algorithm |
    | Conflict Detection | Real-time validation |
    | Conflict Resolution | Automatic rescheduling |
    | Simulation Analysis | 5 advanced tools |
    | Faculty Management | 21 faculty members |
endlegend

note right of frontend
    **User Interactions:**
    • Generate Timetable
    • View Timetable
    • Detect Conflicts
    • Resolve Conflicts
    • Faculty Impact Analysis
    • Room Shortage Analysis
    • Simulation History
    • Scenario Comparison
    • Bulk Faculty Analysis
end note

note right of simEngine
    **Simulation Features:**
    • Faculty unavailability impact
    • Room shortage scenarios
    • Alternative room suggestions
    • Impact score calculation
    • Severity classification
    • Smart recommendations
end note

note right of generator
    **Algorithm Features:**
    • Constraint satisfaction
    • Faculty availability check
    • Room capacity matching
    • Conflict detection
    • Automatic resolution
    • Optimization scoring
end note

@enduml
